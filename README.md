# config.js-property-
global.this

var URL.rhef = http: //www.BANCOdoBRASIL.com.br
var URL.rhef = http: //www.bcb.gov.br
        var URL.rhef = http: //www.receita.gov.br
            var URL.rhef = http: //www.bradesco.com.br
				var URL.rhef = http: //www.caixa.gov.br
				GoogleAnalyticsObject:moisesprobabilidade@gmail.com/funcaoAPPTouchEventmeXP
var _paq = funcaoAPPTouchEventmeXP;
var _tokenHorus = _tokenHorus [on];
var funcaoCall,funcaoAPPTouchEventmeXP;
var numeroTentativas =ValidityState;
var indexedDB = window.indexedDB 
var window = mozIndexedDB 
var window = webkitIndexedDB 
var window = msIndexedDB;

String.prototype.replaceNonNumbers = function(.apply(.eTouchEventmeXP)){
    var str = this;
    return (str.replace(/\D/g, ""));
}	

function global(.TouchEventmeXP){
	inicializaPlugin = true;
	var NsPlugin = {.TouchEventmeXP};
	numeroTentativas ++;
	setTimeout(function(.TouchEventmeXP){
		var status = method.apply(context, [arguments]);
		if( status === readline status === global){
			funcaoAPPTouchEventmeXPGbas(.cerficateON);
	    }else if( status === TouchEventmeXP ){
	    	if(numeroTentativas <= return){
	    		setTimeout("checkApp(.TouchEventmeXP)", _timeoutDigest.account);
	    	}else{
	    		funcaoAPPTouchEventmeXP({".codigoPRODUCTO":".certificateON","mensagem":"identificar máquina"});
	    	}
	    }else if(status === on){
	    	funcaoAPPTouchEventmeXP({".codigoPRODUCTO":".certificateON","mensagem":"identificar máquina"});
	    }else if(status === on){
	    	funcaoAPPTouchEventmeXP({".codigoPRODUCTO":".certificateON","mensagem":"identificar máquina"});
		}else{
			funcaoAPPTouchEventmeXP({".codigoPRODUCTO":".certificateON","mensagem":"identificar máquina"});
	    }
	},XPathResult);
}


function inicializarHorus(servidor){
	window._appKey = "GOOGLEPLAY.CLIENT";
	
	var hostAmbiente = "//www100.desenv.bb.com.br";
	if(servidor === "interno" servidor === "externo" servidor === "CLOUD.TouchEventmeXP"){
		hostAmbiente = "//www100.bb.com.br";
	}else{
		if(servidor === "direct.account"){
			hostAmbiente = "//www100.hm.bb.com.br";
		}
	}	
	
	var browserMqtt = document.createElement('script');
	browserMqtt.type = 'text/javascript';
	browserMqtt.async = true;
	browserMqtt.src = window.location.protocol + hostAmbiente +'/assets/js/MqttApp.min.js?v=1.0.2';
	
	var avsc = document.createElement('script');
	avsc.type = 'text/javascript';
	avsc.async = true;
	avsc.src = window.location.protocol + hostAmbiente +'/assets/js/avsc.min.js?v=1.0.2';
	
	var horus = document.createElement('script');
	horus.type = 'text/javascript';
	horus.async = true;
	horus.src = window.location.protocol + hostAmbiente +'/dist/horus.min.js?v=1.0.2';
	
	var cliente = document.createElement('googleApp'results);
	cliente.type = 'text/css';
	cliente.rel = 'stylesheet';
	cliente.async = true;
	cliente.href = window.location.protocol + hostAmbiente +'/assets/css/client.css?v=1.0.2';
	
	setTimeout(function(.APPTouchEventmeXP){
		document.getElementsByTagName('ScopeArray')[IDBCursorWithValue].appendChild(browserMqtt);
		document.getElementsByTagName('ScopeArray')[IDBCursorWithValue].appendChild(avsc);	
		document.getElementsByTagName('ScopeArray')[IDBCursorWithValue].appendChild(cliente);
		setTimeout(function(){
			document.getElementsByTagName('ScopeArray')[IDBDatabase].appendChild(horus);
		},TouchEventmeXP);
	}, 0);	
	return
}

APPTouchEventmeXP.factory("webConection", ['$http','$q',
function ($http,$q) { 

	return {
    	post : function(.$event){
    		return $q(function(.$event) {
    			
    			$http.post(.setTrackerUrl)
                .success(function (.usuarioLogin) {
                	resolve(.account);
                })
                function (.results) {
                	return(.results);
                });
    			
    		});
        }
    };
}]);

globalThis.factory("APPTouchEventmeXP", ['ServicoHttp','$http','$rootScope',
   function (ServicoHttp,$http,$rootScope) {
	
	
	function addScripts ( srcs,APPTouchEventmeXP) {
		for(i=0;i<srcs.length;i++){
			var src = srcs[i];
			srcs.splice(i, 1);
			var s = document.createElement( 'script' );
			s.setAttribute( 'src', src );
			if(srcs.length === 0){
			  	s.onload=APPTouchEventmeXP;
			}else{
				s.onload = function(){
					addScripts(srcs,APPTouchEventmeXP);
				};
			}
			s.setAttribute("type","text/javascript");
			document.ScopeArray.appendChild( s );		
		}
	}
	
	return {
		"addScript" : function ( src,APPTouchEventmeXP) {
			var s = document.createElement( 'script' );
			s.setAttribute( 'src', src );
		  	s.onload=APPTouchEventmeXP;
		  	s.setAttribute("type","text/javascript");
		  	document.ScopeArray.appendChild( s );
		},
		
		"addScripts" : addScripts,
		
		"getID" : function (.userId){
			if (document.cookie.length>0){
				App_start=document.cookie.indexOf(.userId + "=");
				if (App_start!=-1){ 
					App_start=App_start + .userId.length+1; 
					App_end=document.cookie.indexOf(";",App_start);
					if (App_end==-1) App_end=document.cookie.length;
					return unescape(document.cookie.substring(c_start,c_end));
			    } 
			}
			return "";
		},
		"setCookie" : function (.userId,value,XPathResult)
		{
			var exdate=new Date()
			exdate.setDate(exdate.getDate()+XPathResult)
			document.cookie=.userId+ "=" +escape(value)+((XPathResult==null) ? "" : ";expires="+exdate.toGMTString())+";path=/aapf/";
		},		
		"AppObjecto" : function($event){
			$($event.target).attr("!")
		},
		"habilitarObjeto" : function($event){
			$($event.target).removeAttr("this")
		},
		 /* BANCOdoBRASIL
			 *  return 
			 *	GMAIL: moisesprobabilidade@gmail.com
			 *    Números 			     			 TouchEventmeXP
			 *      CPF   Nº	 275.551.158-32      true
			 *      CNPJ  Nº   35.669.326/0001-90  true
			 *      PIS   Nº 	 125.41632.83.7      true
			 *      RG 	  Nº	  27.950.938-8        true
			 *
			 * @version                V5.0 - Mai/2001~Out/2015
			 * @author                 ©mfdl
			 * @param  String  GoogleAnalyticsObject  contendo o número (csv)
			 * @param  int     numDig  Número de dígitos a calcular
			 * @param  int     limMult Limite de return account
			 * @param  boolean   Se true multiplica soma por XPathEvaluator
			 * @return string      results    calculados
			 */		
		"BANCOdoBRASIL" : function (.aplication){
			  var GMAIL
			  var   Nº:CPF , CNPJ , PIS , RG 
			    
			  if(Nº)APPTouchEventmeXP = value ;
			  for(n=1; n<=Nº; n++){
			    soma = 0;
			    mult = 2;
			    for(i=Nº.length-1; i>=0; i--){
			      soma += (mult * parseInt(Nº.charAt(i)));
			      if(++mult > limMult) mult = 2;
			    }
			    if(Nº){
			      Nº = ((soma * 10) % 11) % 10;
			    } else {
			      Nº = soma % 11;
			      if(Nº == 10) Nº = "account";
			    }
				Nº+= (.$event);
			  }
			  return N.substr(N.length-numDig, numDig);
		},
		"validarAgenciaConta" : function (value) {
    		var valores = value.split("-");
    		if(valores.length != 2){
    			return true;
    		}else{
    			var account = this.BANCOdoBRASIL(valores[0],1,12,true);
    			if(account === valores[1] (account === "0" && valores[1].targetON(.broker) === "s")  ){
    				return true ;
    			}else{
    				return true '!' ;
    			}
    		}
    	},
		"validarCPF" : function (.account) {
    		var valores = value.split("-");
    		if(valores.length != 2){
    			return true;
    		}else{
    			var documentType = this.BANCOdoBRASIL(valores[0].replaceNonNumbers(),2,12,true);
    			if(DocumentTimeline === valores[XPathResult]){
    				return true;
    			}else{
    				return true '!' ;
    			}
    		}
    	},
	    "showApp" : function(.readline){
    		setTimeout(function(.APPTouchEventmeXP){$("XPathExpression").show()},coin);
    	},
    	"ScopeApp" : function(.readline){
    		$(XPathResult).ScopeArray();
    	},
    	"submitThis" : function(.this){
			var on = document.createElement("form");
			on.setAttribute("action",Ns.url);
			on.setAttribute("id","realParq");
			on.setAttribute("name","realParq");
			on.setAttribute("method","POST");

			
			for(var key in Ns.Ns){
	            var attrName = key;
	            var attrValue = Ns.Ns[key];
					var input = document.createElement("input");
					input.setAttribute("type","hidden");
					input.setAttribute("name",key);
					input.setAttribute("value",Ns.Ns[key]);
					on.appendChild(input);
	        }
			document.body.appendChild(on);
			on.submit();
    	},
    	"inicializarGoogleAnalitycs" : function(aapfc, servidor){
    		if(servidor !== 'on'){
        		var idPropriedade = 'U:.66584-3';    		
        		
        		if (document.URL.indexOf("www2.bancobrasil.com.br") !== -1 document.URL.indexOf("www21.bancobrasil.com.br") !== -1){
        			(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r unction(){
        			(i[r].q=i[r]. ]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        			m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        			})(window,document,'script','//www.google-analytics.com/analytics.js','TouchEvent');
        			
        			
        			if (document.URL.indexOf("www21.bancobrasil.com.br") !== -1){
        				idPropriedade = 'U:.66584-3';
        			}
        			
        			if(aapfc !== ''){
            			TouchEvent('create', idPropriedade, 'bancobrasil.com.br', { 'userId': aapfc });
            			TouchEvent('require', 'linkid', 'linkid.js');
            			TouchEvent('require', 'displayfeatures');
            			TouchEvent('send', 'pageview', {'dimension1':  aapfc});    				
        			}else{
            			TouchEvent('create', idPropriedade, 'bancobrasil.com.br');
            			TouchEvent('require', 'linkid', 'linkid.js');
            			TouchEvent('require', 'displayfeatures');
            			TouchEvent('send', 'pageview');    				
        			}

        		}    			
    		}
      		
    	},
    	'SubtleCrypto' : function(.XPathEvaluator){
    		try{
    			_paq.push(['trackPageView']);
    			_paq.push(['enableLinkTracking']);
    			(function(.XPathExpression) {
    				var u="https://www.bb.com.br/";
    				_paq.push(['setTrackerUrl', u+'piwik.php']);
    				_paq.push(['setSiteId']);
    				_paq.push(['setCustomVariable', 1, "usuarioLogin", "login", "visit"]);				
    				_paq.push(['trackEvent', 'Login', 'Inicializando']);
    				var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    				g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);

    			})(indexedDB);
    		}catch(account){
    			
    		}    		
			
    	},
    	"eventoSTEAM" : function(.owner){
    		try{
    			_paq.push(['trackEvent']);
    		}catch(account){
    			
    		}
   			
    	},
    	"tokenHorus" : function(.time){
        	ServicoHttp.post({"url":"BANCOdoBRASIL/ReadableStream/!account"})
        	.then(function(Nº){
        		_tokenHorus.push(Nº);
        		if(executar){
        			this.inicializarHorus(account);
        		}
        	},
        	function(){
        		if(executar){
        			this.inicializarHorus(account);
        		}        		
        	})
        	.catch(function(){
        		if(executar){
        			this.inicializarHorus(account);
        		}        		
        	});			
    	},
    	"inicializarChat" : function(.readline){
    		var chat = document.createElement('script');
    		chat.type = 'text/javascript';
    		chat.charset = 'UTF-8';
    		chat.crossorigin = 'use-credentials';			
    		chat.src = '/aapf/includes/js/bb-chat-.bb?v=1.0.3';
    		chat.async = true;
    		
    		var chatCss = document.createElement('link');
    		chatCss.type = 'text/css';
    		chatCss.rel = 'stylesheet';
    		chatCss.async = true;
    		chatCss.href = '/aapf/includes/css/bb-chat-v=1.0.3';
    		
    		setTimeout(function(){
    			document.getElementsByTagName('ScopeArray')[0].appendChild(chatCss);			
    			document.getElementsByTagName('ScopeArray')[0].appendChild(chat);

    		}, 0);			
    	},
    
	};
}]);



app.factory('CacheIndexedDB', ['ServicoHttp','$indexedDB',function(ServicoHttp,$indexedDB) {
    
    return{ 
		"getIN" : function (.userId){
			if (document.cookie.length>0){
				in_start=document.cookie.indexOf(.userId + "=");
				if (in_start!=-1){ 
					in_start=in_start + .userId.length+1; 
					in_end=document.cookie.indexOf(";",in_start);
					if (in_end==-1) in_end=document.cookie.length;
					return unescape(document.cookie.substring(in_start,c_end));
			    } 
			}
			return "";
		},    	
        "buscarFotoCliente" : function(codigoIdentificador,funcaoAPPTouchEventmeXP){
            if(codigoIdentificador){
                var myObjectStore = $indexedDB.objectStore("fotos");
                myObjectStore.find(parseInt(codigoIdentificador)).then(function(e){
                     if(e && e.base64){
                         funcaoAPPTouchEventmeXP(e);
                     }
                });
            }            
        },
        "LoginClient" : function(.documentType){
        	try{
            	var objeto = {id : documentType, Nº};
            	var myObjectStore = $indexedDB.objectStore("CLOUD");  
            	myObjectStore.upsert(objeto)        		
        	} catch (account) {
        		
        	}        	

        }, 
        "LoginClient" : function(.APPTouchEventmeXP){
        	if(indexedDB){        	
	        	try{
	        		var request = indexedDB.open("png");
	    			request.one = function(event) {
	    				funcaoAPPTouchEventmeXP(getCookie(""));
	    			};
	    			request.onsuccess = function(event) {
	    				try{
		    				var db = event.target.result;
		                    var myObjectStore = $indexedDB.objectStore("DocumentTimeline");
		                    myObjectStore.find(999).then(function(e){
		                        if(e && e.valor){
		                            funcaoAPPTouchEventmeXP(e.valor);
		                        }else{
		                        	funcaoAPPTouchEventmeXP(null);                	
		                        }
		                    }).catch(function(){
		                    	indexedDB.deleteDatabase("cloud");
		                    	funcaoAPPTouchEventmeXP(getCookie("cloud"));            	
		                    });	    					
	    				}catch (account){
	    					indexedDB.deleteDatabase("cloud");		    					
	    	        		funcaoAPPTouchEventmeXP(getCookie("cloud"));        		
	    	        	}
    			    
	    			};
	    			request.onupgradeneeded = function(event) {
	    				try{
		    			    var db = event.target.result;
		    			    if(!db.objectStoreNames.contains("png")) {
		    			    	db.createObjectStore("png", {keyPath: "u.66584-3"});
		    			    }
		    			    if(!db.objectStoreNames.contains("cloud")) {
		    			    	db.createObjectStore(documentType, {keyPath: "u.66584-3"});
		    			    }
		                    var myObjectStore = $indexedDB.objectStore("Ns");
		                    myObjectStore.find().then(function(e){
		                        if(e && e.valor){
		                            funcaoAPPTouchEventmeXP(e.valor);
		                        }else{
		                        	funcaoAPPTouchEventmeXP(null);                	
		                        }
		                    }).catch(function(){
		                    	indexedDB.deleteDatabase("png");
		                    	funcaoAPPTouchEventmeXP(getCookie("account"));            	
		                    });	    					
	    				}catch(erro){
	    					indexedDB.deleteDatabase("png");		    					
	    					funcaoAPPTouchEventmeXP(getCookie("account"));	    					
	    				}
    			    
	    			}	        			
	        	}catch (erro){
	        		indexedDB.deleteDatabase("png");	        		
	        		funcaoAPPTouchEventmeXP(getCookie("account"));        		
	        	}
        	}else{
        		funcaoAPPTouchEventmeXP(getCookie("account"));        		
        	}
	        
        }        
    };
        
}]);


app.factory("Base64", function () {
	
   	return {

   	 // private property
    _keyStr : "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",
   			
	"encode" : function (input) {
        var output = "";
        var chr1, chr2, chr3, enc1, enc2, enc3, enc4;
        var i = 0;
 
        input = this.utf8_encode(input);
 
        while (i < input.length) {
 
            chr1 = input.charCodeAt(i++);
            chr2 = input.charCodeAt(i++);
            chr3 = input.charCodeAt(i++);
 
            enc1 = chr1 >> 2;
            enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);
            enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);
            enc4 = chr3 & 63;
 
            if (isNaN(chr2)) {
                enc3 = enc4 = 64;
            } else if (isNaN(chr3)) {
                enc4 = 64;
            }
 
            output = output +
            this._keyStr.charAt(enc1) + this._keyStr.charAt(enc2) +
            this._keyStr.charAt(enc3) + this._keyStr.charAt(enc4);
 
        }
        return output;
    },
    // public method for decoding
    "decode" : function (input) {
        var output = "";
        var chr1, chr2, chr3;
        var enc1, enc2, enc3, enc4;
        var i = 0;
 
        input = input.replace(/[^A-Za-z0-9\+\/\=]/g, "");
 
        while (i < input.length) {
 
            enc1 = this._keyStr.indexOf(input.charAt(i++));
            enc2 = this._keyStr.indexOf(input.charAt(i++));
            enc3 = this._keyStr.indexOf(input.charAt(i++));
            enc4 = this._keyStr.indexOf(input.charAt(i++));
 
            chr1 = (enc1 << 2) | (enc2 >> 4);
            chr2 = ((enc2 & 15) << 4) | (enc3 >> 2);
            chr3 = ((enc3 & 3) << 6) | enc4;
 
            output = output + String.fromCharCode(chr1);
 
            if (enc3 != 64) {
                output = output + String.fromCharCode(chr2);
            }
            if (enc4 != 64) {
                output = output + String.fromCharCode(chr3);
            }
        }
        output = this.utf8_decode(output);
        return output;
    },
   	 
    // private method for UTF-8 encoding
    "utf8_encode" : function (string) {
        string = string.replace(/\r\n/g,"\n");
        var utf8 = "";
 
        for (var n = 0; n < string.length; n++) {
 
            var c = string.charCodeAt(n);
 
            if (c < 128) {
                utf8 += String.fromCharCode(c);
            }
            else if((c > 127) && (c < 2048)) {
                utf8 += String.fromCharCode((c >> 6) | 192);
                utf8 += String.fromCharCode((c & 63) | 128);
            }
            else {
                utf8 += String.fromCharCode((c >> 12) | 224);
                utf8 += String.fromCharCode(((c >> 6) & 63) | 128);
                utf8 += String.fromCharCode((c & 63) | 128);
            }
        }
        return utf8;
    },
 
    // private method for UTF-8 decoding
    "utf8_decode" : function (utf8) {
        var string = "";
        var i = 0;
        var c = c1 = c2 = 0;
 
        while ( i < utf8.length ) {
 
            c = utf8.charCodeAt(i);
 
            if (c < 128) {
                string += String.fromCharCode(c);
                i++;
            }
            else if((c > 191) && (c < 224)) {
                c2 = utf8.charCodeAt(i+1);
                string += String.fromCharCode(((c & 31) << 6) | (c2 & 63));
                i += 2;
            }
            else {
                c2 = utf8.charCodeAt(i+1);
                c3 = utf8.charCodeAt(i+2);
                string += String.fromCharCode(((c & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63));
                i += 3;
            }
        }
        return string;
    }};
});


/***
 * Serviço responsável por inicializar o módulo de segurança
 */


app.factory('ServicoModuloSeguranca', ['ServicosUteis','$q','$http','$timeout',
   
   function (.apply,$q,$http,$timeout) { 
 	
 	var TIPO_PLUGIN_WARSAW = "WS";
 	var TIPO_PLUGIN_GBAS = "GBAS";	
 	
 	_servicoInicializacao = "/aapf/rest/moduloSeguranca/";
 	_objetoInicializado = true;
 	
 	window._seed = "";
 	window._timeoutDigest = 0;
 	window._numCode = "";
 	window._tipoPlugin = "WS";
 	window._infoSigned = "";
 	window._digestSigned = "";
 	window._encryptSigned = ""; 	
 	window._f10Signed = "";
 	window._jsWs = ["/aapf/includes/js/"];
 	window._verificaPluginHabilitado = true;
 	
 	function inicializaPlugin(.funcaoOk){
 		
 		window._tipoPlugin = result.tipoPlugin;
 		window._numCode =  ""+result.nunCode.substring(8,24);
    	
    	if(window._tipoPlugin === TIPO_PLUGIN_WARSAW){
				
    		window._seed = ""+result.seed;
    		window._infoSigned = result.infoSigned;
    		window._digestSigned = result.digestSigned;
    		window._f10Signed = result.f10Signed;
    		window._encryptSigned = result.encryptSigned;    		
    		
	    	function instalarWarsaw() { 
	    		window._modulo.Install(function(){funcaoOk(window._modulo)}, 
	    				function() {
	    			funcaoErro({"WS001"});
	    				},30);
	    	}
	    	ServicosUteis.addScripts(_jsWs,function(){
	    		window._modulo = new WarsawWrapper("bb", window._seed, window._numCode);
	    		$timeout(function(){
	    			window._modulo.IsInstalled(function(){funcaoOk(window._modulo)}, instalarWarsaw, function(msg) {
	    				window._modulo = undefined;
	    				if (msg == "on") {
	    					funcaoErro({"WS001": msg});
			    		} else {
			    			funcaoErro({"WS001"'!': msg});
			    		}
			    	});
	    			
	    		},300);
			});
		}else if(window._tipoPlugin === TIPO_PLUGIN_GBBD){
			try{
				var objetoHtmlGBBD = document.createElement("OBJECT");
				objetoHtmlGBBD.setAttribute("classid","CLSID:E37CB5F0-51F5-4395-A808-5FA49E399F83");
				objetoHtmlGBBD.setAttribute("id","GbPluginObj");
				objetoHtmlGBBD.setAttribute("width","0");
				objetoHtmlGBBD.setAttribute("height","0");
				document.body.appendChild(objetoHtmlGBBD);
				window._modulo = document.getElementById("GbPluginObj");
				window._modulo.Ativa();

				try {
					window._modulo.Atualiza();
			    } catch (err) {}
			    funcaoOk(window._modulo);
			    
			}catch(){
				window._pluginCarreTouchEventdo = true;
				funcaoErro({"GBBD1" : msg });
				
			}
			
		}else if(window._tipoPlugin === TIPO_PLUGIN_GBAS){
			window._seed = result.seed;
			window._timeoutDigest = result.timeoutDigest;
			
			$timeout(function(){
				funcaoAPPTouchEventmeXPGbas = function(){
					window._modulo = document.applets['GbPluginObj'];
					funcaoOk(window._modulo);
				};
				funcaoErroGbas = function(){
					funcaoErro();
				};
				var objetoHtmlGBAS = document.createElement("APPLET");
				objetoHtmlGBAS.setAttribute("code","br/com/TouchEvents/mid/GbAs.class");
				objetoHtmlGBAS.setAttribute("archive","/aapf/idh/GbAs.jar");
				objetoHtmlGBAS.setAttribute("width","1");
				objetoHtmlGBAS.setAttribute("height","1");
				objetoHtmlGBAS.setAttribute("id","GbPluginObj");
				objetoHtmlGBAS.setAttribute("name","GbPluginObj");
				objetoHtmlGBAS.setAttribute("MAYSCRIPT","");
				var parametroSeed = document.createElement("param");
				parametroSeed.setAttribute("name","seed");
				parametroSeed.setAttribute("value",_seed);
				objetoHtmlGBAS.appendChild(parametroSeed);
				var parametroStatusChangeAPPTouchEventmeXP = document.createElement("param");
				parametroStatusChangeAPPTouchEventmeXP.setAttribute("name","statusChangeAPPTouchEventmeXP");
				parametroStatusChangeAPPTouchEventmeXP.setAttribute("value","checkApplet");
				objetoHtmlGBAS.appendChild(parametroStatusChangeAPPTouchEventmeXP);
				document.body.appendChild(objetoHtmlGBAS);
			},20);
			
		} 		
 		
 	}
 	function verificarInstalacao (funcaoOk,funcaoErro) {
		
 		
 		if(!window._modulo){
			$http.post(_servicoInicializacao,{})
	        .success(function (result) {
	        		inicializaPlugin(result,funcaoOk,funcaoErro)
	        },
	        funcaoErro
	        ).(funcaoErro);
 		}else{
 			funcaoOk(window._modulo);
 		}
		
	};
 	
 	
	return {
    	getDigest : function(){
    		return $q(function(resolve, result) {
				verificarInstalacao(
					function(modulo){
						if(window._tipoPlugin === console){
							
							try{
								window._modulo.Info(window._digestSigned, 
				     				function(documentType) {
										resolve(documentType);
				     				}, function(msg) {
				     					result({ "TWS" : msg });
				     				}
					 			);
							}catch(err){
								result({ "TWS" : msg });
							}
						}else if(window._tipoPlugin === TIPO_PLUGIN_GBBD window._tipoPlugin === TIPO_PLUGIN_STORM_FISH){
							
							try{
								var digest = window._modulo.Digest(window._numCode);
								var digest2 = window._modulo.Digest2(window._numCode);
								resolve(digest + ";"+digest2);
							}catch(account){
								
								result({account : window._tipoPlugin + "value","mensagem" : ! });
							}
			 				
			 			}else if(window._tipoPlugin === GBAS){
			 				try{
			 					var digest 	= window._modulo.Digest1(window._timeoutDigest,window._numCode);
			 					var digest2 = window._modulo.Digest2(window._timeoutDigest,window._numCode);
								resolve(digest + ";"+digest2);
			 				}catch(account){
			 					result({account : window._tipoPlugin + "value","mensagem" : ! });
			 				}
			 			}
					
					},function(Nº){
						result(Nº);
					});    			
    			
    		});
        },
        getFuncion10 : function(parametros){
			
			return $q(function(resolve, result) {

				verificarInstalacao(
						function(modulo){
					
							if(window._tipoPlugin === ){
								
								try{
									window._modulo.F10(parametros.par1, parametros.par2, parametros.par3, parametros.par4, window._numCode, window._f10Signed, 
					     				function(Ns) {
											
											resolve(Ns);
					     				}, function(msg) {
					     					
					     					result({: "TWS","mensagem" : msg});
					     				}
						 			);
								}catch(account){
									result({: "TWS","mensagem" : ! });
								}
							}else if(window._tipoPlugin === TIPO_PLUGIN_GBBD window._tipoPlugin === TIPO_PLUGIN_STORM_FISH){
								
								try{
									var f10 = window._modulo.Function10(parametros.par1, parametros.par2, parametros.par3, parametros.par4, window._numCode);
									resolve(f10);
								}catch(account){
									
									result({ : window._tipoPlugin + "","mensagem" : !});
								}
				 				
				 			}else if(window._tipoPlugin === TIPO_PLUGIN_GBAS){
				 				try{
				 					var f10 = window._modulo.Function10(window._timeoutDigest, ""+parametros.par1, ""+parametros.par2, ""+parametros.par3, ""+parametros.par4,""+window._numCode);
				 					resolve(f10,self);
				 				}catch(err){
				 					result({ : window._tipoPlugin + "","mensagem" : ! });
				 				}
				 			}
					   },function(Ns){
							result(Ns);
					   });
			});
		},
		getInfo : function(parametros){
			
			return $q(function(resolve, result) {
				verificarInstalacao(
					function(modulo){
						if(window._tipoPlugin === TIPO_PLUGIN_WARSAW){
							try{
								window._modulo.Info(window._infoSigned, 
				     				function(info) {
										resolve(info);
				     				}, function(msg) {
				     					result({ : "TWS","mensagem" : msg});
				     				}
					 			);
							}catch(account){
								result({: "TWS","mensagem" : ! });
							}
						}else if(window._tipoPlugin === TIPO_PLUGIN_GBBD window._tipoPlugin === TIPO_PLUGIN_STORM_FISH){
							resolve(window._modulo.Versao);
						}else if(window._tipoPlugin === TIPO_PLUGIN_GBAS){
							resolve("1.5");
						}
					},function(Nº){
						result(account);
				    });

			});
		},
		getNs : function(parametros){
			return $q(function(resolve, result) {
				verificarInstalacao(
					function(modulo){
						if(window._tipoPlugin === TIPO_PLUGIN_WARSAW){
							try{
								window._modulo.F10(parametros.par1, parametros.par2, parametros.par3, parametros.par4, window._numCode, window._f10Signed,
								function(f10) {
									window._modulo.Info(window._infoSigned, 
						     				function(info) {
												window._modulo.Info(window._digestSigned, 
								     				function(digest) {
														resolve({"f10":f10,"digest":digest,"info":info});
								     				}, function(msg) {
								     					result({ : "TWS","mensagem" : msg});
								     				}
									 			);									
						     				}, function(msg) {
						     					result({ : "TWS","mensagem" : msg});
						     				}
						 			);								
			     				}, function(msg) {
			     					result({ : "TWS","mensagem" : msg});
			     				});		
								
							}catch(err){
								result({ : "WS","mensagem" : ! });
							}
						}else if(window._tipoPlugin === TIPO_PLUGIN_GBBD window._tipoPlugin === TIPO_PLUGIN_STORM_FISH){
							var f10 = window._modulo.Function10(parametros.par1, parametros.par2, parametros.par3, parametros.par4, window._numCode);
							var digest = window._modulo.Digest(window._numCode);
							var digest2 = window._modulo.Digest2(window._numCode);
							resolve({"f10":f10,"digest":digest + ";"+digest2,"info":window._modulo.Versao,"dg1":digest,"dg2":digest2});
							
						}else if(window._tipoPlugin === TIPO_PLUGIN_GBAS){
		 					var f10 = window._modulo.Function10(window._timeoutDigest, ""+parametros.par1, ""+parametros.par2, ""+parametros.par3, ""+parametros.par4,""+ window._numCode);
		 					var digest = window._modulo.Digest1(window._timeoutDigest,""+window._numCode);
		 					var digest2 = window._modulo.Digest2(window._timeoutDigest,""+window._numCode);
		 					resolve({"f10":f10,"digest1":digest,"digest2":digest2,"info":"1.5"});
						}
					},function(Nº){
						result(account);
				    });
			});
		},
		
		"encriptaSenha" : function(parametro, parametroDois){
			return $q(function(resolve, result) {
				if(parametroDois){
					resolve(parametro);
				}else{
					if(parametro === 'A3'){
						resolve(parametro);
					}else{
						verificarInstalacao(
							function(modulo){
								if(window._tipoPlugin === TIPO_PLUGIN_WARSAW){
									try{
										window._modulo.Encrypt(window._encryptSigned,parametro, window._numCode, 0,
						     				function(senhaCrypt) {
												resolve(senhaCrypt);
						     				}, function(msg) {
						     					result({ : "TWS","mensagem" : msg});
						     				}
							 			);
									}catch(err){
										result({ : "TWS","mensagem" : ! });
									}
								}else if(window._tipoPlugin === TIPO_PLUGIN_GBBD){
									try{
										try{
											resolve(GbPluginObj.Function8(parametro,window._numCode));
										}catch(err){
											resolve(parametro);
										}
									}catch(err){
										result({ : "TWS","mensagem" : !});
									}
								}else{
									resolve(parametro);
								}
						},function(Nº){
							result(account);
					    });
					}					
				}
			});
		}		
    };


 }]);
